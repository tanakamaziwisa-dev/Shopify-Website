<section class="featured-collections page-width" {{ section.shopify_attributes }}>
  <div class="section-heading-wrap">
    <h2>{{ section.settings.heading | escape }}</h2>
  </div>
  <div class="collection-grid collection-grid--{{ section.settings.columns }}">
    {% for block in section.blocks %}
      {% assign featured_collection = block.settings.collection %}
      {% if featured_collection != blank %}
        <a href="{{ featured_collection.url }}" class="collection-card collection-card--{{ section.settings.image_shape }}" {{ block.shopify_attributes }}>
          <div class="collection-card__image-wrap">
            {% if featured_collection.image != blank %}
              {{ featured_collection.image | image_url: width: 900 | image_tag: loading: 'lazy', widths: '320, 480, 720, 900', class: 'collection-card__image', alt: featured_collection.title | escape }}
            {% else %}
              {{ 'collection-1' | placeholder_svg_tag: 'placeholder-svg' }}
            {% endif %}
          </div>
          <div class="collection-card__content">
            <h3>{{ featured_collection.title | escape }}</h3>
            {% if section.settings.show_product_count %}
              <p>{{ featured_collection.products_count }} {{ 'products.product.product' | t }}</p>
            {% endif %}
          </div>
        </a>
      {% endif %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Featured collections",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop by collection"
    },
    {
      "type": "range",
      "id": "columns",
      "label": "Columns on desktop",
      "default": 3,
      "min": 2,
      "max": 4,
      "step": 1
    },
    {
      "type": "select",
      "id": "image_shape",
      "label": "Image shape",
      "default": "rounded",
      "options": [
        { "value": "rounded", "label": "Rounded" },
        { "value": "square", "label": "Square" },
        { "value": "pill", "label": "Pill" }
      ]
    },
    {
      "type": "checkbox",
      "id": "show_product_count",
      "label": "Show product count",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Collection",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [
    {
      "name": "Featured collections",
      "blocks": [
        { "type": "collection" },
        { "type": "collection" },
        { "type": "collection" }
      ]
    }
  ]
}
{% endschema %}
